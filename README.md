<div align="center">

# ğŸ“Š Monitor SEFAZ Nacional

### Dashboard de Disponibilidade em Tempo Real com Design Nordic-Tech

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Next.js](https://img.shields.io/badge/Next.js-14-black)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)
![Supabase](https://img.shields.io/badge/Supabase-Realtime-green)

<br />

> **Monitoramento resiliente** dos serviÃ§os de Nota Fiscal EletrÃ´nica (NFe e NFCe) de todas as Secretarias da Fazenda (SEFAZ) do Brasil.

[Funcionalidades](#-funcionalidades) â€¢ [Tech Stack](#-tech-stack) â€¢ [Arquitetura](#-arquitetura) â€¢ [Como Rodar](#-como-rodar) â€¢ [Database](#-configuraÃ§Ã£o-do-banco-de-dados)

</div>

---

## ğŸ–¼ï¸ Preview

*(Adicione aqui um print da sua tela final)*

## ğŸš€ Funcionalidades

- **ğŸ“¡ Realtime Sincronizado:** Utiliza **Websockets** (Supabase Channels) para atualizar o status instantaneamente em todos os clientes conectados assim que uma mudanÃ§a ocorre.
- **ğŸ›¡ï¸ Scraping Blindado:** Backend customizado utilizando **Got** para contornar bloqueios WAF e gerenciar conexÃµes TLS legadas dos portais governamentais.
- **ğŸ¨ Nordic UI:** Interface moderna, minimalista e escura, focada em legibilidade e reduÃ§Ã£o de fadiga visual.
- **ğŸ“ˆ HistÃ³rico Visual:** GrÃ¡ficos de uptime estilo "Status Page" com tooltip detalhado e cÃ¡lculo de porcentagem de disponibilidade.
- **ğŸ”„ Multi-Modelo:** AlternÃ¢ncia rÃ¡pida entre monitoramento de **NFe** (Modelo 55) e **NFCe** (Modelo 65).
- **ğŸ‘ï¸ Contador de Visitas:** PersistÃªncia de acessos integrada ao banco de dados.

## ğŸ› ï¸ Tech Stack

O projeto foi construÃ­do utilizando as tecnologias mais modernas do ecossistema React/Node:

### Frontend
- **Framework:** [Next.js 14](https://nextjs.org/) (App Router)
- **EstilizaÃ§Ã£o:** [Tailwind CSS](https://tailwindcss.com/)
- **Ãcones:** [Lucide React](https://lucide.dev/)
- **Linguagem:** TypeScript

### Backend & Dados
- **Database:** [Supabase](https://supabase.com/) (PostgreSQL)
- **Realtime:** Supabase Realtime (Replication)
- **HTTP/Scraping:** [Got](https://github.com/sindresorhus/got) (Robust Request Library)
- **Infra:** Vercel (Recommended)

## ğŸ—ï¸ Arquitetura

O sistema opera em um modelo hÃ­brido de **Polling + Event Driven**:

1.  **IngestÃ£o:** Um timer (Cron/Interval) no servidor dispara a rota de status.
2.  **Request:** A biblioteca **Got** realiza a conexÃ£o segura, tratando automaticamente headers, cookies e protocolos SSL antigos (TLSv1).
3.  **PersistÃªncia:** Os dados coletados sÃ£o salvos no **Supabase**.
4.  **Broadcast:** O banco de dados detecta o `INSERT` e dispara um evento via WebSocket.
5.  **Cliente:** O Frontend escuta o canal e atualiza a UI sem necessidade de refresh (F5).

## âš¡ Como Rodar

### PrÃ©-requisitos
- Node.js 18+
- Conta no Supabase

### 1. Clone o repositÃ³rio
```bash
git clone [https://github.com/seu-usuario/monitor-sefaz.git](https://github.com/seu-usuario/monitor-sefaz.git)
cd monitor-sefaz
```
### 2. Instale as dependÃªncias
```bash
npm install
```
### 3.Configure as VariÃ¡veis de Ambiente
Crie um arquivo .env.local na raiz do projeto:
```bash
NEXT_PUBLIC_SUPABASE_URL=sua_url_do_supabase
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua_anon_key_do_supabase
```
### 4. Inicie o servidor
```bash
npm run dev
```
Acesse http://localhost:3000.

## ğŸ—„ï¸ ConfiguraÃ§Ã£o do Banco de Dados
No painel do Supabase, vÃ¡ atÃ© o SQL Editor e execute os comandos abaixo para preparar a estrutura:

```bash

-- 1. Tabela de Logs (HistÃ³rico)
create table sefaz_logs (
  id bigint generated by default as identity primary key,
  estado text not null,
  modelo text default 'NFe',
  autorizacao text,
  retorno_autorizacao text,
  inutilizacao text,
  consulta text,
  status_servico text,
  created_at timestamp with time zone default timezone('America/Sao_Paulo'::text, now()) not null
);

-- 2. Ãndices para performance
create index idx_estado_modelo_created on sefaz_logs(estado, modelo, created_at desc);

-- 3. Tabela de Visitas (Contador)
create table page_views (
  id int primary key,
  views int default 0
);

-- 4. Inicializa o contador
insert into page_views (id, views) values (1, 0);

```
### Importante: NÃ£o esqueÃ§a de habilitar o Realtime na tabela sefaz_logs nas configuraÃ§Ãµes de "Replication" do Supabase:
```bash
alter publication supabase_realtime add table sefaz_logs;
```

ğŸ¤ ContribuiÃ§Ã£o
ContribuiÃ§Ãµes sÃ£o bem-vindas! Sinta-se Ã  vontade para abrir issues ou pull requests.

ğŸ“ CrÃ©ditos
Desenvolvido com â¤ï¸ e cafÃ©.

<div align="center"> <p>Design & Engenharia por</p> <h3>Nordic-Tech</h3> </div>
